var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(e,g,n){e!=Array.prototype&&e!=Object.prototype&&(e[g]=n.value)};$jscomp.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:"undefined"!=typeof global&&null!=global?global:e};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(e){return $jscomp.SYMBOL_PREFIX+(e||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var e=$jscomp.global.Symbol.iterator;e||(e=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[e]&&$jscomp.defineProperty(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(e){var g=0;return $jscomp.iteratorPrototype(function(){return g<e.length?{done:!1,value:e[g++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(e){$jscomp.initSymbolIterator();e={next:e};e[$jscomp.global.Symbol.iterator]=function(){return this};return e};$jscomp.makeIterator=function(e){$jscomp.initSymbolIterator();var g=e[Symbol.iterator];return g?g.call(e):$jscomp.arrayIterator(e)};$jscomp.arrayFromIterator=function(e){for(var g,n=[];!(g=e.next()).done;)n.push(g.value);return n};$jscomp.arrayFromIterable=function(e){return e instanceof Array?e:$jscomp.arrayFromIterator($jscomp.makeIterator(e))};
(function(e){function g(a){var b=a.code,c=a.name;Object.defineProperty(this,"code",{set:function(a){b=a},get:function(){return b}});Object.defineProperty(this,"name",{set:function(a){c=a},get:function(){return c}})}function n(a,b){var c=b;"/"!=b[0]&&(c=a+"/"+b);a=c.split("/");b=[];for(c=0;c<a.length;++c){var d=a[c];if(".."===d){if(!b.length)throw Error("Invalid path");b.pop()}else"."!==d&&""!==d&&b.push(d)}return c="/"+b.join("/")}function v(a){var b=null;this.size=a.size||0;this.name=a.name||"";
this.type=a.type||"";this.lastModifiedDate=a.lastModifiedDate||null;Object.defineProperty(this,"blob_",{enumerable:!0,get:function(){return b},set:function(a){b=a;this.size=b.size;this.name=b.name;this.type=b.type;this.lastModifiedDate=b.lastModifiedDate}.bind(this)})}function z(a){if(!a)throw Error("Expected fileEntry argument to write.");var b=0,c=a.file_?a.file_.blob_:null;Object.defineProperty(this,"position",{get:function(){return b}});Object.defineProperty(this,"length",{get:function(){return c?
c.size:0}});this.seek=function(a){b=a;b>this.length&&(b=this.length);0>b&&(b+=this.length);0>b&&(b=0)};this.truncate=function(a){c=c?a<this.length?c.slice(0,a):new Blob([c,new Uint8Array(a-this.length)],{type:c.type}):new Blob([]);b=0;this.write(c)};this.write=function(d){if(!d)throw Error("Expected blob argument to write.");if(this.onwritestart)this.onwritestart();if(c){var f=c.slice(0,b),e=c.slice(b+d.size),g=b-f.size;0>g&&(g=0);c=new Blob([f,new Uint8Array(g),d,e],{type:c.type})}else c=new Blob([d],
{type:d.type});f=function(f){a.file_.blob_=f;a.file_.lastModifiedDate=d.lastModifiedDate||new Date;h.put(a,function(f){A||(a.file_.blob_=c,a.file_.lastModifiedDate=d.lastModifiedDate||null);b+=d.size;if(this.onwriteend)this.onwriteend()}.bind(this),this.onerror)}.bind(this);A?f(c):D(c,f)}}function E(a){var b=!1;this.readEntries=function(c,d){if(!c)throw Error("Expected successCallback argument.");b?c([]):h.getAllEntries(a.fullPath,function(a){b=!0;c(a)},d)}}function w(a,b){this.modificationTime_=
a||null;this.size_=b||0}function t(){}function B(a,b,c,d,f,e){e=e?d:function(){a.remove(d,f)};var g=a.file_.blob_;b=new l({file_:{blob_:g},name:c,fullPath:b.fullPath+"/"+c,filesystem:b.filesystem});b=new z(b);b.onerror=f;b.onwriteend=e;b.write(g)}function l(a){this.file_=null;Object.defineProperty(this,"isFile",{enumerable:!0,get:function(){return!0}});Object.defineProperty(this,"isDirectory",{enumerable:!0,get:function(){return!1}});a&&(this.file_=a.file_,this.name=a.name,this.fullPath=a.fullPath,
this.filesystem=a.filesystem,"string"===typeof this.file_.blob_&&(this.file_.blob_=C(this.file_.blob_)))}function k(a){Object.defineProperty(this,"isFile",{enumerable:!0,get:function(){return!1}});Object.defineProperty(this,"isDirectory",{enumerable:!0,get:function(){return!0}});a&&(this.name=a.name,this.fullPath=a.fullPath,this.filesystem=a.filesystem)}function F(a,b){u=a==e.TEMPORARY?"Temporary":"Persistent";this.name=(location.protocol+location.host).replace(/:/g,"_")+":"+u;this.root=new k;this.root.fullPath=
"/";this.root.filesystem=this;this.root.name=""}function m(a){switch(a.target.errorCode){case 12:console.log("Error - Attempt to open db with a lower version than the current one.");break;default:console.log("errorCode: "+a.target.errorCode)}console.log(a,a.code,a.message)}var x=e.indexedDB||e.mozIndexedDB||e.msIndexedDB;if(x){var A=!0,C=function(a){if(-1==a.indexOf(";base64,")){var b=a.split(",");a=b[0].split(":")[1];b=decodeURIComponent(b[1]);return new Blob([b],{type:a})}b=a.split(";base64,");
a=b[0].split(":")[1];b=window.atob(b[1]);for(var c=b.length,d=new Uint8Array(c),f=0;f<c;++f)d[f]=b.charCodeAt(f);return new Blob([d],{type:a})},D=function(a,b){var c=new FileReader;c.readAsDataURL(a);c.onloadend=function(){b(c.result)}};e.PERSISTENT||(e.TEMPORARY=0,e.PERSISTENT=1);void 0===e.FileError&&(window.FileError=function(){},FileError.prototype.prototype=Error.prototype);FileError.INVALID_MODIFICATION_ERR||(FileError.INVALID_MODIFICATION_ERR=9,FileError.NOT_FOUND_ERR=1);g.prototype=FileError.prototype;
g.prototype.toString=Error.prototype.toString;var p=new g({code:FileError.INVALID_MODIFICATION_ERR,name:"INVALID_MODIFICATION_ERR"}),G=new g({code:1E3,name:"Not implemented"}),r=new g({code:FileError.NOT_FOUND_ERR,name:"Not found"}),q=null,u="temporary",h={db:null},y=String.fromCharCode(48);v.prototype.constructor=v;w.prototype={get modificationTime(){return this.modificationTime_},get size(){return this.size_}};t.prototype={name:null,fullPath:null,filesystem:null,copyTo:function(a,b,c,d){B(this,
a,b,c,d,!1)},getParent:function(){throw G;},moveTo:function(a,b,c,d){B(this,a,b,c,d,!1)},getMetadata:function(a,b){if(!a)throw Error("Expected successCallback argument.");try{this.isFile?a(new w(this.file_.lastModifiedDate,this.file_.size)):b(new g({code:1001,name:"getMetadata() not implemented for DirectoryEntry"}))}catch(c){b&&b(c)}},remove:function(a,b){if(!a)throw Error("Expected successCallback argument.");h["delete"](this.fullPath,function(){a()},b)},toURL:function(){return"filesystem:"+(location.protocol+
"//"+location.host)+"/"+u.toLowerCase()+this.fullPath}};l.prototype=new t;l.prototype.constructor=l;l.prototype.createWriter=function(a){a(new z(this))};l.prototype.file=function(a,b){if(!a)throw Error("Expected successCallback argument.");if(null==this.file_)if(b)b(r);else throw r;else b=null==this.file_.blob_?this.file_:this.file_.blob_,b.lastModifiedDate=this.file_.lastModifiedDate,a(b)};k.prototype=new t;k.prototype.constructor=k;k.prototype.createReader=function(){return new E(this)};k.prototype.getDirectory=
function(a,b,c,d){a=n(this.fullPath,a);h.get(a,function(f){b||(b={});!0===b.create&&!0===b.exclusive&&f?d&&d(p):!0!==b.create||f?!0===b.create&&f?f.isDirectory?c(new k(f)):d&&d(p):b.create&&!1!==b.create||f?b.create&&!1!==b.create||!f||!f.isFile?c(new k(f)):d&&d(p):"/"==a?(f=new k,f.name="",f.fullPath="/",f.filesystem=q,c(f)):d&&d(r):(f=new k,f.name=a.split("/").pop(),f.fullPath=a,f.filesystem=q,h.put(f,c,d))},d)};k.prototype.getFile=function(a,b,c,d){a=n(this.fullPath,a);h.get(a,function(f){b||(b=
{});!0===b.create&&!0===b.exclusive&&f?d&&d(p):!0!==b.create||f?!0===b.create&&f?f.isFile?c(new l(f)):d&&d(p):b.create&&!1!==b.create||f?b.create&&!1!==b.create||!f||!f.isDirectory?c(new l(f)):d&&d(p):d&&d(r):(f=new l,f.name=a.split("/").pop(),f.fullPath=a,f.filesystem=q,f.file_=new v({size:0,name:f.name,lastModifiedDate:new Date}),h.put(f,c,d))},d)};k.prototype.removeRecursively=function(a,b){if(!a)throw Error("Expected successCallback argument.");this.remove(a,b)};h.open=function(a,b,c){var d=this;
a=x.open(a.replace(":","_"));a.onerror=c||m;a.onupgradeneeded=function(a){d.db=a.target.result;d.db.onerror=m;d.db.objectStoreNames.contains("entries")||d.db.createObjectStore("entries")};a.onsuccess=function(a){d.db=a.target.result;d.db.onerror=m;b(a)};a.onblocked=c||m};h.close=function(){this.db.close();this.db=null};h.drop=function(a,b){if(this.db){var c=x.deleteDatabase(this.db.name);c.onsuccess=function(b){a(b)};c.onerror=b||m;h.close()}};h.get=function(a,b,c){if(this.db){var d=this.db.transaction(["entries"],
"readonly");a=IDBKeyRange.bound(a,a+y,!1,!0);var f=d.objectStore("entries").get(a);d.onabort=c||m;d.oncomplete=function(a){b(f.result)}}};h.getAllEntries=function(a,b,c){if(this.db){var d=[],f=null;"/"!=a&&(f=IDBKeyRange.bound(a+"/",a+y,!1,!0));var e=this.db.transaction(["entries"],"readonly");e.onabort=c||m;e.oncomplete=function(c){d=d.filter(function(b){var c=b.fullPath.split("/").length,d=a.split("/").length;if("/"==a&&c<d+1||"/"!=a&&c==d+1)return b});b(d)};e.objectStore("entries").openCursor(f).onsuccess=
function(a){if(a=a.target.result){var b=a.value;d.push(b.isFile?new l(b):new k(b));a["continue"]()}}}};h["delete"]=function(a,b,c){if(this.db){var d=this.db.transaction(["entries"],"readwrite");d.oncomplete=b;d.onabort=c||m;a=IDBKeyRange.bound(a,a+y,!1,!0);d.objectStore("entries")["delete"](a)}};h.put=function(a,b,c){if(this.db){var d=this.db.transaction(["entries"],"readwrite");d.onabort=c||m;d.oncomplete=function(c){b(a)};d.objectStore("entries").put(a,a.fullPath)}};e.addEventListener("beforeunload",
function(a){h.db&&h.db.close()},!1);e.requestFileSystem=function(a,b,c,d){a!=e.TEMPORARY&&a!=e.PERSISTENT&&d?d(p):(q=new F(a,b),h.open(q.name,function(a){c(q)},d))};e.resolveLocalFileSystemURL=function(a,b,c){var d="filesystem:"+(location.protocol+"//"+location.host)+"/"+u.toLowerCase();a=a.replace(d,"");"/"===a.substr(-1)&&(a=a.slice(0,-1));a?h.get(a,function(a){if(a){if(a.isFile)return b(new l(a));if(a.isDirectory)return b(new k(a))}else c&&c(r)},c):b(q.root)};e===window&&e.RUNNING_TESTS&&(e.Entry=
t,e.FileEntry=l,e.DirectoryEntry=k,e.resolveToFullPath_=n,e.Metadata=w,e.Base64ToBlob=C)}})(self);
